# yaml-language-server: $schema=./node_modules/envio/evm.schema.json
name: cork-indexer
networks:
- id: 11155111
  start_block: 8886593
  contracts:


  - name: CorkConfig
    address:
    - 0xE5c5C29e32b9ef3eE63c2c22A588d7eB4AAf328e
    handler: src/EventHandlers.ts
    events:
    - event: CorkPoolSet(address corkPool)
    - event: Paused(address account)
    - event: RoleAdminChanged(bytes32 indexed role, bytes32 indexed previousAdminRole, bytes32 indexed newAdminRole)
    - event: RoleGranted(bytes32 indexed role, address indexed account, address indexed sender)
    - event: RoleRevoked(bytes32 indexed role, address indexed account, address indexed sender)
    - event: TreasurySet(address treasury)
    - event: Unpaused(address account)

  - name: CorkPool
    abi_file_path: ./abis/CorkPool.json
    handler: src/EventHandlers.ts
    events:
    - event: BaseRedemptionFeePercentageUpdated(bytes32 indexed id, uint256 indexed baseRedemptionFeePercentage)
    - event: Deposit(bytes32 indexed marketId, address indexed sender, address indexed owner, uint256 assets, uint256 shares)
    - event: DepositPaused(bytes32 indexed marketId)
    - event: DepositUnpaused(bytes32 indexed marketId)
    - event: Initialized(uint64 version)
    - event: MarketCreated(bytes32 indexed id, address indexed referenceAsset, address indexed collateralAsset, uint256 expiry, address exchangeRateProvider, address principalToken, address swapToken)
    - event: OwnershipTransferred(address indexed previousOwner, address indexed newOwner)
    - event: ReturnPaused(bytes32 indexed marketId)
    - event: ReturnUnpaused(bytes32 indexed marketId)
    - event: Swap(bytes32 indexed id, address indexed swaper, uint256 paUsed, uint256 swapTokenUsed, uint256 raReceived, uint256 dsExchangeRate, uint256 feePercentage, uint256 fee)
    - event: SwapPaused(bytes32 indexed marketId)
    - event: SwapUnpaused(bytes32 indexed marketId)
    - event: UnwindSwap(bytes32 indexed id, address indexed buyer, uint256 raUsed, uint256 receivedReferenceAsset, uint256 receivedSwapToken, uint256 feePercentage, uint256 fee, uint256 exchangeRates)
    - event: UnwindSwapFeeRateUpdated(bytes32 indexed id, uint256 indexed unwindSwapFeeRate)
    - event: UnwindSwapPaused(bytes32 indexed marketId)
    - event: UnwindSwapUnpaused(bytes32 indexed marketId)
    - event: Upgraded(address indexed implementation)
    - event: WithdrawExtended(bytes32 indexed marketId, address indexed sender, address indexed owner, uint256 assets0, uint256 assets1, uint256 shares0, uint256 shares1)
    - event: WithdrawalPaused(bytes32 indexed marketId)
    - event: WithdrawalUnpaused(bytes32 indexed marketId)

  - name: ExchangeRateProvider
    abi_file_path: ./abis/ExchangeRateProvider.json
    handler: src/EventHandlers.ts
    events:
    - event: RateUpdated(bytes32 indexed id, uint256 newRate)

  - name: SharesFactory
    address:
    - 0xDCed1d589bbc522d8C6843c39203d40DC2eD0B5b
    handler: src/EventHandlers.ts
    events:
    - event: CorkPoolChanged(address indexed oldCorkPool, address indexed newCorkPool)
    - event: Initialized(uint64 version)
    - event: OwnershipTransferred(address indexed previousOwner, address indexed newOwner)
    - event: Upgraded(address indexed implementation)
    
  - name: CPT
    abi_file_path: ./abis/ERC4626.json 
    handler: src/EventHandlers.ts
    events:
      - event: Transfer(address indexed from, address indexed to, uint256 value)
      - event: Approval(address indexed owner, address indexed spender, uint256 value)
      - event: Deposit(address indexed caller, address indexed owner, uint256 assets, uint256 shares)
      - event: Withdraw(address indexed caller, address indexed receiver, address indexed owner, uint256 assets, uint256 shares)
      
  - name: CST
    abi_file_path: ./abis/ERC4626.json 
    handler: src/EventHandlers.ts
    events:
      - event: Transfer(address indexed from, address indexed to, uint256 value)
      - event: Approval(address indexed owner, address indexed spender, uint256 value)
  
  - name: PriceFeedAggregator
    address:
    - 0x5A2734CC0341ea6564dF3D00171cc99C63B1A7d3
    - 0x719E22E3D4b690E5d96cCb40619180B5427F14AE
    - 0xaBc400913676a91A61B798Ed35962602de3544aF
    - 0x9d9305445F404E925563d5D5EcC65C815Ec1655b
    - 0x2606DffB6dfD8e9871CcE1C0A3F153F5d5F65106
    - 0x90FeD00c44aE95f96A7883af38782Ef937c72A03
    - 0xD404D68e5616e9C7045be2Dc1C5865EE328B6638
    - 0x498D8bcCE2E3aEf50A69Cd6F1cA6CB8f3E3B5C9A
    handler: src/EventHandlers.ts
    abi_file_path: ./abis/chainlink_aggregator/Aggregator.json
    events:
      - event: AnswerUpdated(int256 indexed current, uint256 indexed roundId, uint256 updatedAt)

unordered_multichain_mode: true
preload_handlers: true


